# iFlow2API 现代化 GUI 使用说明

## 概述

新的 GUI 采用现代化深色主题设计，顶部标签导航，包含三个核心页面：

- **仪表盘** - 服务状态监控、系统资源、运行日志
- **账号管理** - OAuth 认证、API Key 配置
- **API 反代** - 服务配置、端口设置、高级选项

## 运行方式

### 方式 1：直接运行
```bash
python gui_modern.py
```

### 方式 2：使用批处理脚本（Windows）
```bash
run_gui.bat
```

## 功能说明

### 仪表盘页面

- **服务状态卡片** - 显示当前服务运行状态（运行中/已停止）
- **统计卡片** - 总请求数、成功率、运行时间
- **资源监控** - 实时 CPU 和内存使用率（每秒更新）
- **快捷操作** - 启动/停止服务、打开管理面板
- **运行日志** - 实时显示服务日志输出

### 账号管理页面

- **OAuth 认证** - 点击按钮启动浏览器进行 OAuth 登录
- **Token 刷新** - 手动刷新访问令牌
- **退出登录** - 删除所有认证信息
- **API Key 配置** - 直接输入或从文件导入 API Key

### API 反代页面

- **服务开关** - 快速启用/禁用代理服务
- **端口配置** - 设置监听端口（默认 8000，范围 1024-65535）
- **上游 API** - 配置 iFlow API 地址
- **高级设置** - 重试次数、超时时间
- **配置保存** - 保存配置到本地文件

## 配置文件

配置文件保存在 `~/.iflow/` 目录：

- `oauth_creds.json` - OAuth 认证信息
- `settings.json` - API Key 和基本设置
- `gui_config.json` - GUI 专用配置

## 界面特点

1. **深色主题** - 护眼设计，适合长时间使用
2. **卡片布局** - 信息分组清晰，易于浏览
3. **实时更新** - 系统资源和服务状态实时监控
4. **响应式交互** - 按钮状态随服务状态自动更新
5. **中文界面** - 全中文化，操作直观

## 与旧版 GUI 的区别

| 特性 | 旧版 gui_pyqt.py | 新版 gui_modern.py |
|------|------------------|-------------------|
| 导航 | 侧边按钮 | 顶部标签导航 |
| 主题 | 浅色 | 深色（现代化） |
| 布局 | 单页 | 多页面 |
| 统计图表 | 简单数字 | 卡片式设计 |
| 资源监控 | 无 | 实时 CPU/内存 |
| 日志显示 | 有 | 有（更美观） |

## 打包为 EXE

使用 PyInstaller 打包：

```bash
pip install pyinstaller
pyinstaller --onefile --windowed --name "iFlow2API" gui_modern.py
```

打包后的 EXE 文件位于 `dist/iFlow2API.exe`

## 注意事项

1. 首次使用需要先进行 OAuth 认证或配置 API Key
2. 服务启动后会占用配置的端口（默认 8000）
3. 关闭应用时会提示是否停止运行中的服务
4. 配置更改后需要点击「保存配置」按钮
